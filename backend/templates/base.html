<!DOCTYPE html>
<html lang="en">

<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<title>{% block title %}Bayesian Disease Probability Calculator{% endblock %}</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />

<link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />

<link rel="stylesheet"
href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@48,400,1,0" />

<style>
/* Mobile-specific navbar adjustments */
@media (max-width: 991.98px) {
.navbar-brand .navbar-title {
font-size: 0.9rem !important;
}

.navbar .container {
display: flex;
align-items: center;
justify-content: space-between;
}

.navbar-toggler {
order: 2;
margin-left: auto;
border: none; /* Cleaner mobile look */
}

.navbar-toggler:focus {
box-shadow: none; /* Remove blue outline on mobile */
}

/* Main Hamburger Icon Toggle Logic */
.navbar-toggler .cross {
display: none;
}

.navbar-toggler:not(.collapsed) .burger {
display: none;
}

.navbar-toggler:not(.collapsed) .cross {
display: block;
}

/* Ensure the collapsed content stacks correctly on mobile */
.navbar-collapse {
background-color: inherit; /* Matches your custom dark bg */
padding: 1rem 0;
}
}

/* Dashboard Menu Styles */
.dashboard-menu-wrapper {
position: relative;
}

.dashboard-menu-toggle {
background: none;
border: none;
color: #ffffff;
padding: 0.5rem;
border-radius: 0.375rem;
cursor: pointer;
display: flex;
align-items: center;
justify-content: center;
transition: all 0.2s ease;
}

.dashboard-menu-toggle:hover {
background: rgba(255, 255, 255, 0.1);
}

.dashboard-dropdown {
position: absolute;
top: 100%;
right: 0;
margin-top: 0.5rem;
min-width: 220px;
background: #ffffff;
border: 1px solid #dee2e6;
border-radius: 0.5rem;
box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
display: none; /* Controlled by JS toggle */
z-index: 1050;
}

.dashboard-dropdown.show {
display: block;
}

.dashboard-dropdown-item {
display: flex;
align-items: center;
padding: 0.75rem 1rem;
color: #34495e;
text-decoration: none;
transition: background 0.2s ease;
}

.dashboard-dropdown-item:hover {
background: rgba(26, 188, 156, 0.1);
color: #1abc9c;
}

.dashboard-dropdown-item i,
.dashboard-dropdown-item svg {
width: 20px;
margin-right: 0.75rem;
flex-shrink: 0;
}

.dashboard-dropdown-divider {
height: 1px;
background: #dee2e6;
margin: 0;
}

.dashboard-dropdown-label {
font-size: 0.7rem;
text-transform: uppercase;
color: #6c757d;
padding: 0.5rem 1rem 0.25rem;
font-weight: 600;
letter-spacing: 0.05em;
}

@media (max-width: 991.98px) {
/* On mobile, make the dashboard dropdown part of the vertical flow */
.dashboard-dropdown {
position: static;
width: 100%;
box-shadow: none;
border: none;
background: transparent;
}
.dashboard-dropdown-item {
color: rgba(255, 255, 255, 0.8);
}
.dashboard-dropdown-item:hover {
background: rgba(255, 255, 255, 0.1);
color: #fff;
}
.dashboard-dropdown-label {
color: rgba(255, 255, 255, 0.5);
padding-left: 0;
}
}
</style>
</head>

<body class="d-flex flex-column min-vh-100">
<nav class="navbar navbar-expand-lg navbar-dark bg-custom-dark shadow-sm">
<div class="container">
<a class="navbar-brand d-flex align-items-center" href="/">
<img src="{{ url_for('static', filename='assets/logo.png') }}" alt="Medical Health Logo" class="me-2"
style="height: 40px; width: auto;">
<span class="fw-semibold navbar-title">Disease-prediction App</span>
</a>
<button class="navbar-toggler collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
<svg class="burger" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
<line x1="3" y1="6" x2="21" y2="6"></line>
<line x1="3" y1="12" x2="21" y2="12"></line>
<line x1="3" y1="18" x2="21" y2="18"></line>
</svg>
<svg class="cross" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
<line x1="18" y1="6" x2="6" y2="18"></line>
<line x1="6" y1="6" x2="18" y2="18"></line>
</svg>
</button>
<div class="collapse navbar-collapse" id="navbarNav">
<ul class="navbar-nav ms-auto align-items-center">
<li class="nav-item">
<a class="nav-link {% if request.path == '/' %}active{% endif %}" href="/">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
stroke-linejoin="round" class="me-1 align-text-bottom">
<path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
<polyline points="9 22 9 12 15 12 15 22"></polyline>
</svg>
Home
</a>
</li>
<li class="nav-item">
<a class="nav-link {% if '/calculator' in request.path %}active{% endif %}"
href="{{ url_for('disease.calculator') }}">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
stroke-linejoin="round" class="me-1 align-text-bottom">
<rect x="4" y="2" width="16" height="20" rx="2"></rect>
<line x1="8" y1="6" x2="16" y2="6"></line>
<line x1="8" y1="10" x2="16" y2="10"></line>
<line x1="8" y1="14" x2="12" y2="14"></line>
<line x1="8" y1="18" x2="12" y2="18"></line>
<circle cx="14" cy="16" r="2"></circle>
</svg>
Calculator
</a>
</li>
<li class="nav-item ms-lg-2">
<button class="dark-mode-toggle" id="darkModeToggle" aria-label="Toggle dark mode">
<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
stroke-linejoin="round" class="sun-icon" style="display: none;">
<circle cx="12" cy="12" r="5"></circle>
<line x1="12" y1="1" x2="12" y2="3"></line>
<line x1="12" y1="21" x2="12" y2="23"></line>
<line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
<line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
<line x1="1" y1="12" x2="3" y2="12"></line>
<line x1="21" y1="12" x2="23" y2="12"></line>
<line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
<line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
</svg>
<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
stroke-linejoin="round" class="moon-icon">
<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
</svg>
</button>
</li>
<li class="nav-item ms-lg-2">
<div class="dashboard-menu-wrapper">
<button class="dashboard-menu-toggle" id="dashboardMenuToggle" aria-label="Menu"
aria-expanded="false">
<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24"
fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
stroke-linejoin="round">
<line x1="3" y1="6" x2="21" y2="6"></line>
<line x1="3" y1="12" x2="21" y2="12"></line>
<line x1="3" y1="18" x2="21" y2="18"></line>
</svg>
</button>
<div class="dashboard-dropdown" id="dashboardDropdown">
<div class="dashboard-dropdown-label">Dashboards</div>
<a href="/doctor-dashboard" class="dashboard-dropdown-item">
<i class="fas fa-user-md"></i> Doctor Dashboard
</a>
<a href="/patient-dashboard" class="dashboard-dropdown-item">
<i class="fas fa-user-injured"></i> Patient Dashboard
</a>
<a href="/disease-detection-dashboard" class="dashboard-dropdown-item">
<i class="fas fa-microscope"></i> Disease Detection Dashboard
</a>
<div class="dashboard-dropdown-divider"></div>
<div class="pages-dropdown" id="pagesDropdown">
<div class="dashboard-dropdown-label">Pages</div>
<a href="/scalability" class="dashboard-dropdown-item">
<i class="fas fa-chart-line"></i> Scalability
</a>
<a href="/help" class="dashboard-dropdown-item">
<i class="fas fa-question-circle"></i> Help
</a>
<a href="/history" class="dashboard-dropdown-item">
<i class="fas fa-history"></i> History
</a>
<div class="dashboard-dropdown-divider"></div>
<div class="dashboard-dropdown-label">Account</div>
{% if session.get('user_id') %}
<a href="{{ url_for('auth.profile') }}" class="dashboard-dropdown-item">
<i class="fas fa-user-circle"></i> Profile
</a>
{% else %}
<a href="{{ url_for('auth.auth') }}" class="dashboard-dropdown-item">
<i class="fas fa-sign-in-alt"></i> Sign In / Register
</a>
{% endif %}
</div>
</div>
</li>
</ul>
</div>
</div>
</nav>

<main class="container my-5 flex-grow-1">
{% block content %}{% endblock %}
</main>

<!-- Footer -->
<footer class="bg-custom-dark text-white text-center py-4 mt-auto">
<div class="container">
<p class="mb-1">&copy; {{ current_year }} Disease-prediction App — Prediction-based medical insights for
everyone.</p>
<p class="small mb-2">
<a href="/privacy" class="text-white text-decoration-none">Privacy</a>
<span class="mx-2">·</span>
<a href="/terms" class="text-white text-decoration-none">Terms</a>
<span class="mx-2">·</span>
<a href="/contact" class="text-white text-decoration-none">Contact</a>
</p>
<p class="mb-0">
<a href="https://github.com/sudheerxdev/Disease-predictor-v2" target="_blank" rel="noopener"
class="text-white me-3" aria-label="GitHub">
<i class="fab fa-github fa-lg"></i>
</a>
<a href="https://www.linkedin.com/in/sudheercodec/" target="_blank" rel="noopener"
class="text-white" aria-label="LinkedIn">
<i class="fab fa-linkedin fa-lg"></i>
</a>
</p>
</div>
</footer>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

<script>
document.addEventListener("DOMContentLoaded", function () {
// --- DARK MODE LOGIC ---
const darkModeToggle = document.getElementById('darkModeToggle');
const sunIcon = document.querySelector('.sun-icon');
const moonIcon = document.querySelector('.moon-icon');
const body = document.body;

// Function to apply theme
const applyTheme = (isDark) => {
if (isDark) {
body.classList.add('dark-mode');
sunIcon.style.display = 'block';
moonIcon.style.display = 'none';
} else {
body.classList.remove('dark-mode');
sunIcon.style.display = 'none';
moonIcon.style.display = 'block';
}
};

// Check for saved preference
const savedTheme = localStorage.getItem('theme');
if (savedTheme === 'dark') {
applyTheme(true);
}

// Toggle click listener
darkModeToggle.addEventListener('click', function() {
const isCurrentlyDark = body.classList.contains('dark-mode');
const newThemeIsDark = !isCurrentlyDark;

applyTheme(newThemeIsDark);
localStorage.setItem('theme', newThemeIsDark ? 'dark' : 'light');
});


// --- DASHBOARD DROPDOWN LOGIC ---
const menuToggle = document.getElementById('dashboardMenuToggle');
const dropdown = document.getElementById('dashboardDropdown');

if (menuToggle && dropdown) {
menuToggle.addEventListener('click', function (e) {
e.stopPropagation();
const isShown = dropdown.classList.toggle('show');
menuToggle.setAttribute('aria-expanded', isShown);
});

document.addEventListener('click', function (e) {
if (!menuToggle.contains(e.target) && !dropdown.contains(e.target)) {
dropdown.classList.remove('show');
menuToggle.setAttribute('aria-expanded', 'false');
}
});
}

const navbarNav = document.getElementById('navbarNav');
navbarNav.addEventListener('show.bs.collapse', function () {
if (dropdown) dropdown.classList.remove('show');
});
});
</script>
<div id="chatbot-launcher" style="position: fixed; bottom: 20px; right: 20px; z-index: 1000; cursor: pointer;">
    {% include 'chatbot_widget.html' %}
</div>

<style>
    /* Styling to ensure the widget looks like a floating button if it isn't already */
    #chatbot-launcher {
        transition: transform 0.3s ease;
    }
    #chatbot-launcher:hover {
        transform: scale(1.1); /* Subtle pop effect on hover */
    }
    
    /* Optional: Ensure the actual chatbot window (inside chatbot_widget.html) 
       is hidden by default or positioned correctly relative to this launcher */
</style>
</body>

</html>
